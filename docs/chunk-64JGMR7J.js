import{a as F,b as N,c as O}from"./chunk-KZK4EBN3.js";import{a as I,b as R,i as M}from"./chunk-NUDTNQBT.js";import{Da as C,Ga as w,Ma as S,Na as x,Oa as y,Pa as k,Qa as D,Ra as s,Sa as i,Ta as r,Ua as _,W as u,X as p,Ya as f,_a as m,ab as a,ca as g,db as T,eb as l,fb as h,gb as v,hb as V,ib as E,pa as P,ra as o}from"./chunk-5VBEFWA7.js";var z=(n,c)=>({"btn-outline-primary":n,"btn-secondary disabled":c});function A(n,c){if(n&1){let t=f();i(0,"button",21),m("click",function(){u(t);let d=a();return p(d.addToCart(d.product()))}),_(1,"i",22),l(2," Add to Cart "),r()}if(n&2){let t=a();s("ngClass",E(1,z,t.product().stock>0,t.product().stock<=0))}}function L(n,c){if(n&1){let t=f();i(0,"div",15)(1,"button",23),m("click",function(){u(t);let d=a();return p(d.cartService.decreaseQuantity(d.product().id))}),_(2,"i",24),r(),i(3,"span",25),l(4),r(),i(5,"button",26),m("click",function(){u(t);let d=a();return p(d.cartService.increaseQuantity(d.product().id))}),_(6,"i",27),r()()}if(n&2){let t=a();o(),s("disabled",t.cartService.getQuantity(t.product().id)<=1),o(3),v(" ",t.cartService.getQuantity(t.product().id)," "),o(),s("disabled",t.cartService.getQuantity(t.product().id)>=t.product().stock)}}function W(n,c){if(n&1){let t=f();i(0,"app-product",28),m("openProduct",function(d){u(t);let b=a();return p(b.openProduct(d))})("addToCart",function(d){u(t);let b=a();return p(b.addToCart(d))}),r()}if(n&2){let t=c.$implicit;s("product",t)}}var Q=class n extends O{product=g(this.router.currentNavigation()?.extras.state?.product);allRelatedProducts=g([]);constructor(){super(),this.getProductsData()}ngAfterViewInit(){this.productService.products().length==0?(this.getProductsData(),setTimeout(()=>{this.loadRelatedProducts()},1e3)):this.loadRelatedProducts()}onScroll(){if(console.log(this.data().length<this.allRelatedProducts().length),this.data().length<this.allRelatedProducts().length){let t=this.allRelatedProducts().slice(0,this.size+=5);this.data.set(t),setTimeout(()=>{this.isScrollView()&&this.onScroll()},1e3)}}isScrollView(){return this.scrollContainer()?.nativeElement.scrollWidth<=this.scrollContainer()?.nativeElement.clientWidth}loadRelatedProducts(){let c=this.productService.getRelatedProducts(this.product());this.allRelatedProducts.set(c),this.onScroll()}openProduct(c){this.product.set(c),this.loadRelatedProducts()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["app-product-details"]],features:[w],decls:31,vars:19,consts:[[1,"overflow-y-auto","w-100","p-5"],[1,"rounded-4","mb-5","p-3"],[1,"row"],[1,"col-12","col-md-6"],[1,"image-container","rounded","center"],[1,"img-fluid","rounded","h-100",3,"src","alt"],[1,"fw-bold"],[1,"text-muted","small","mb-2"],[1,"lead","fw-semibold","text-primary","mb-2"],[1,"mb-3"],[1,"badge"],[1,"description"],[1,"d-flex","align-items-center","gap-2","mt-4"],[1,""],[1,"btn","w-100",3,"ngClass"],[1,"d-flex","w-100","justify-content-between","align-items-center","gap-2"],["routerLink","/",1,"btn","btn-outline-secondary"],[1,"mt-4"],[1,"border","border-0","border-top","border-2","border-dark-subtle","center","position-relative","px-2","py-4","rounded-4"],["infiniteScroll","",1,"search-results","products","d-flex","w-100","overflow-x-auto","gap-2","py-4",3,"scrolled","infiniteScrollDistance","infiniteScrollThrottle","horizontal","scrollWindow"],[3,"product"],[1,"btn","w-100",3,"click","ngClass"],[1,"bi","bi-cart-plus","me-1"],[1,"btn","btn-sm","btn-outline-secondary","flex-grow-1",3,"click","disabled"],[1,"bi","bi-dash"],[1,"fw-semibold"],[1,"btn","btn-sm","btn-outline-primary","flex-grow-1",3,"click","disabled"],[1,"bi","bi-plus"],[3,"openProduct","addToCart","product"]],template:function(t,e){t&1&&(i(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),_(5,"img",5),r()(),i(6,"div",3)(7,"h2",6),l(8),r(),i(9,"p",7),l(10),r(),i(11,"p",8),l(12),r(),i(13,"div",9)(14,"span",10),l(15),r()(),i(16,"p",11),l(17),r(),i(18,"div",12)(19,"div",13),S(20,A,3,4,"button",14)(21,L,7,3,"div",15),r(),i(22,"button",16),l(23,"\u2190 Back to Products"),r()()()()(),i(24,"div",17)(25,"h3"),l(26,"Related Products you have viewed "),r()(),i(27,"div",18)(28,"div",19),m("scrolled",function(){return e.onScroll()}),k(29,W,1,1,"app-product",20,y),r()()()),t&2&&(o(5),s("src",e.product().imageUrl,P)("alt",e.product().title),o(3),h(e.product().title),o(2),V("",e.product().brand," \u2022 ",e.product().category),o(2),v("\u20B9",e.product().price),o(2),T("bg-success",e.product().stock>5)("bg-warning",e.product().stock<=5&&e.product().stock>0)("bg-danger",e.product().stock<=0),o(),v(" ",e.product().stock>0?e.product().stock>5?"In Stock":"Low Stock":"Out of Stock"," "),o(2),h(e.product().description),o(3),x(e.cartService.isInCart(e.product().id)?21:20),o(8),s("infiniteScrollDistance",1)("infiniteScrollThrottle",50)("horizontal",!0)("scrollWindow",!1),o(),D(e.data()))},dependencies:[F,R,I,N,M],styles:["[_nghost-%COMP%]   section[_ngcontent-%COMP%]{height:calc(100% - 10rem)}[_nghost-%COMP%]   .image-container[_ngcontent-%COMP%]{height:20rem}"]})};export{Q as ProductDetails};
