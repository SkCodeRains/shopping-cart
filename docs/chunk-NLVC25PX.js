import{a as F,b as N,c as O}from"./chunk-RR4AQYFK.js";import{a as I,c as R,j as M}from"./chunk-ZYELYZZL.js";import{Ea as C,Ha as w,Oa as S,Pa as x,Qa as y,Ra as k,Sa as D,Ta as s,Ua as i,Va as r,W as u,Wa as _,X as p,_a as f,bb as m,ca as g,db as l,kb as T,mb as a,nb as h,ob as v,pa as P,pb as V,ra as n,ub as E}from"./chunk-QNUDJEJG.js";var z=(d,o)=>({"btn-outline-primary":d,"btn-secondary disabled":o});function A(d,o){if(d&1){let t=f();i(0,"button",21),m("click",function(){u(t);let c=l();return p(c.addToCart(c.product()))}),_(1,"i",22),a(2," Add to Cart "),r()}if(d&2){let t=l();s("ngClass",E(1,z,t.product().stock>0,t.product().stock<=0))}}function L(d,o){if(d&1){let t=f();i(0,"div",15)(1,"button",23),m("click",function(){u(t);let c=l();return p(c.cartService.decreaseQuantity(c.product().id))}),_(2,"i",24),r(),i(3,"span",25),a(4),r(),i(5,"button",26),m("click",function(){u(t);let c=l();return p(c.cartService.increaseQuantity(c.product().id))}),_(6,"i",27),r()()}if(d&2){let t=l();n(),s("disabled",t.cartService.getQuantity(t.product().id)<=1),n(3),v(" ",t.cartService.getQuantity(t.product().id)," "),n(),s("disabled",t.cartService.getQuantity(t.product().id)>=t.product().stock)}}function W(d,o){if(d&1){let t=f();i(0,"app-product",28),m("openProduct",function(c){u(t);let b=l();return p(b.openProduct(c))})("addToCart",function(c){u(t);let b=l();return p(b.addToCart(c))}),r()}if(d&2){let t=o.$implicit;s("product",t)}}var Q=class d extends O{product=g(this.router.currentNavigation()?.extras.state?.product);allRelatedProducts=g([]);constructor(){super(),this.getProductsData()}ngAfterViewInit(){this.productService.products().length==0?(this.getProductsData(),setTimeout(()=>{this.loadRelatedProducts()},1e3)):this.loadRelatedProducts()}onScroll(){}isScrollView(){return this.scrollContainer()?.nativeElement.scrollWidth<=this.scrollContainer()?.nativeElement.clientWidth}loadRelatedProducts(){let o=this.productService.getRelatedProducts(this.product());this.allRelatedProducts.set(o),this.onScroll()}openProduct(o){this.router.navigate(["product",o.id],{state:{product:o}}),this.product.set(o),this.loadRelatedProducts()}static \u0275fac=function(t){return new(t||d)};static \u0275cmp=C({type:d,selectors:[["app-product-details"]],features:[w],decls:31,vars:19,consts:[[1,"overflow-y-auto","w-100","p-5"],[1,"rounded-4","mb-5","p-3"],[1,"row"],[1,"col-12","col-md-6"],[1,"image-container","rounded","center"],[1,"img-fluid","rounded","h-100",3,"src","alt"],[1,"fw-bold"],[1,"text-muted","small","mb-2"],[1,"lead","fw-semibold","text-primary","mb-2"],[1,"mb-3"],[1,"badge"],[1,"description"],[1,"d-flex","align-items-center","gap-2","mt-4"],[1,""],[1,"btn","w-100",3,"ngClass"],[1,"d-flex","w-100","justify-content-between","align-items-center","gap-2"],["routerLink","/",1,"btn","btn-outline-secondary"],[1,"mt-4"],[1,"border","border-0","border-top","border-2","border-dark-subtle","center","position-relative","px-2","py-4","rounded-4"],["infiniteScroll","",1,"search-results","products","d-flex","w-100","overflow-x-auto","gap-2","py-4",3,"scrolled","infiniteScrollDistance","infiniteScrollThrottle","horizontal","scrollWindow"],[3,"product"],[1,"btn","w-100",3,"click","ngClass"],[1,"bi","bi-cart-plus","me-1"],[1,"btn","btn-sm","btn-outline-secondary","flex-grow-1",3,"click","disabled"],[1,"bi","bi-dash"],[1,"fw-semibold"],[1,"btn","btn-sm","btn-outline-primary","flex-grow-1",3,"click","disabled"],[1,"bi","bi-plus"],[3,"openProduct","addToCart","product"]],template:function(t,e){t&1&&(i(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),_(5,"img",5),r()(),i(6,"div",3)(7,"h2",6),a(8),r(),i(9,"p",7),a(10),r(),i(11,"p",8),a(12),r(),i(13,"div",9)(14,"span",10),a(15),r()(),i(16,"p",11),a(17),r(),i(18,"div",12)(19,"div",13),S(20,A,3,4,"button",14)(21,L,7,3,"div",15),r(),i(22,"button",16),a(23,"\u2190 Back to Products"),r()()()()(),i(24,"div",17)(25,"h3"),a(26,"Related Products you have viewed "),r()(),i(27,"div",18)(28,"div",19),m("scrolled",function(){return e.onScroll()}),k(29,W,1,1,"app-product",20,y),r()()()),t&2&&(n(5),s("src",e.product().imageUrl,P)("alt",e.product().title),n(3),h(e.product().title),n(2),V("",e.product().brand," \u2022 ",e.product().category),n(2),v("\u20B9",e.product().price),n(2),T("bg-success",e.product().stock>5)("bg-warning",e.product().stock<=5&&e.product().stock>0)("bg-danger",e.product().stock<=0),n(),v(" ",e.product().stock>0?e.product().stock>5?"In Stock":"Low Stock":"Out of Stock"," "),n(2),h(e.product().description),n(3),x(e.cartService.isInCart(e.product().id)?21:20),n(8),s("infiniteScrollDistance",1)("infiniteScrollThrottle",50)("horizontal",!0)("scrollWindow",!1),n(),D(e.data()))},dependencies:[F,R,I,N,M],styles:["[_nghost-%COMP%]   section[_ngcontent-%COMP%]{height:calc(100% - 10rem)}[_nghost-%COMP%]   .image-container[_ngcontent-%COMP%]{height:20rem}"]})};export{Q as ProductDetails};
